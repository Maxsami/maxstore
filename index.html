<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>One‑Page Shop — Fully Loaded Theme</title>
  <style>
    /* ---------- Reset & Utility ---------- */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#app{height:100%}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:linear-gradient(180deg,#0f172a 0%, #071033 100%); color:#e6eef8; -webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}/* ---------- Container ---------- */n
.container{max-width:1200px;margin:32px auto;padding:24px}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.04); border-radius:14px; padding:18px}

/* ---------- Header ---------- */
header{display:flex;align-items:center;justify-content:space-between;gap:20px;margin-bottom:22px}
.brand{display:flex;align-items:center;gap:14px}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#7c3aed,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:white;box-shadow:0 6px 18px rgba(0,0,0,0.4)}
.brand h1{font-size:20px;line-height:1}
.brand p{font-size:12px;color:rgba(230,238,248,0.7)}

/* ---------- Layout ---------- */
.layout{display:grid;grid-template-columns:1fr 360px;gap:18px}
@media (max-width:980px){.layout{grid-template-columns:1fr}.sidebar{order:2}}

/* ---------- Product grid ---------- */
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
.product{border-radius:12px;overflow:hidden;position:relative}
.product .thumb{height:160px;background-size:cover;background-position:center}
.product .meta{padding:12px}
.product h3{font-size:16px;margin-bottom:6px}
.price-row{display:flex;align-items:center;justify-content:space-between}
.price{font-weight:700;font-size:16px}
.muted{font-size:12px;color:rgba(230,238,248,0.66)}

/* ---------- Buttons ---------- */
.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,#06b6d4,#7c3aed);color:#041027;font-weight:700;cursor:pointer}
.btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef8}

/* ---------- Sidebar (cart) ---------- */
.sidebar .card{padding:16px;height:100%}
.cart-list{margin-top:12px;display:flex;flex-direction:column;gap:10px;max-height:420px;overflow:auto;padding-right:6px}
.cart-item{display:flex;gap:12px;align-items:center}
.cart-item img{width:56px;height:48px;object-fit:cover;border-radius:8px}
.cart-item .info{flex:1}
.totals{margin-top:12px;border-top:1px dashed rgba(255,255,255,0.04);padding-top:10px}

/* ---------- Modal ---------- */
.modal-backdrop{position:fixed;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.7));display:flex;align-items:center;justify-content:center;z-index:40}
.modal{width:platformFillWidth();max-width:720px;background:#02102b;border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04)}

/* ---------- Tiny UI flourishes ---------- */
.badge{background:rgba(124,58,237,0.12);color:#c7b3ff;padding:6px 8px;border-radius:999px;font-weight:600;font-size:12px}
.pill{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:999px;font-size:12px}

/* scrollbar */
.cart-list::-webkit-scrollbar{width:8px}
.cart-list::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.06);border-radius:10px}

footer{margin-top:22px;text-align:center;color:rgba(230,238,248,0.55);font-size:13px}

/* small helpers */
.center{text-align:center}
.space{height:14px}
input,select,textarea{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:8px;color:inherit;width:100%}

  </style>
</head>
<body>
  <div id="app">
    <div class="container">
      <header>
        <div class="brand">
          <div class="logo">JS</div>
          <div>
            <h1>One‑Page Shop</h1>
            <p class="muted">A fully loaded single-file demo. Add to cart, Buy, Checkout — all working locally.</p>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:12px">
          <div class="badge">Live demo</div>
          <button id="openCartBtn" class="btn">Cart (<span id="cartCount">0</span>)</button>
        </div>
      </header><main class="layout">
    <section>
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px">
          <div>
            <h2 style="font-size:18px">Featured Products</h2>
            <div class="muted">Hand-picked items. Click Buy to simulate a purchase.</div>
          </div>
          <div class="pill">Secure · Fast · Local</div>
        </div>

        <div class="products" id="products"></div>

        <div class="space"></div>
        <div class="center muted">This is a self-contained HTML + JS demo. Save as <code>one-page-shop.html</code> and open in browser.</div>
      </div>
    </section>

    <aside class="sidebar">
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <div>
            <h3 style="margin:0">Your Cart</h3>
            <div class="muted">Items you plan to buy</div>
          </div>
          <div class="muted">Local</div>
        </div>

        <div class="cart-list" id="cartList">
          <!-- cart items here -->
        </div>

        <div class="totals">
          <div style="display:flex;justify-content:space-between"><div class="muted">Subtotal</div><div id="subtotal">₹0</div></div>
          <div style="display:flex;justify-content:space-between;margin-top:6px"><div class="muted">Fees</div><div id="fees">₹0</div></div>
          <div style="display:flex;justify-content:space-between;margin-top:8px;font-weight:800;font-size:18px"><div>Total</div><div id="grandTotal">₹0</div></div>
          <div style="margin-top:10px;display:flex;gap:10px">
            <button id="checkoutBtn" class="btn" style="flex:1">Checkout</button>
            <button id="clearBtn" class="btn secondary">Clear</button>
          </div>
        </div>
      </div>

    </aside>
  </main>

  <footer>Built for demo — cart persisted to <code>localStorage</code>. No network calls.</footer>
</div>

  </div>  <!-- Modal container -->  <div id="modalRoot"></div>  <script>
    /***********************
     * Demo product data
     ***********************/
    const PRODUCTS = [
      { id: 'p1', title: 'Aurora Headphones', price: 2499, desc: 'Wireless, noise-canceling with 30h battery', img: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"600\"><rect width=\"100%\" height=\"100%\" fill=\"%2308132b\"/><text x=\"50%\" y=\"50%\" fill=\"%23ffffff\" font-size=\"36\" text-anchor=\"middle\">Aurora Headphones</text></svg>` )},
      { id: 'p2', title: 'Nebula Watch', price: 4999, desc: 'Smart watch with health sensors', img: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"600\"><rect width=\"100%\" height=\"100%\" fill=\"%230f172a\"/><text x=\"50%\" y=\"50%\" fill=\"%23ffffff\" font-size=\"36\" text-anchor=\"middle\">Nebula Watch</text></svg>`)},
      { id: 'p3', title: 'Comet Backpack', price: 1999, desc: 'Water-resistant, 25L capacity', img: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"600\"><rect width=\"100%\" height=\"100%\" fill=\"%23071b3a\"/><text x=\"50%\" y=\"50%\" fill=\"%23ffffff\" font-size=\"36\" text-anchor=\"middle\">Comet Backpack</text></svg>`)},
      { id: 'p4', title: 'Stellar Lamp', price: 899, desc: 'Mood lamp with 16M colors', img: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"600\"><rect width=\"100%\" height=\"100%\" fill=\"%2302242b\"/><text x=\"50%\" y=\"50%\" fill=\"%23ffffff\" font-size=\"36\" text-anchor=\"middle\">Stellar Lamp</text></svg>`)},
    ];

    /***********************
     * App state & helpers
     ***********************/
    const storeKey = 'onePageShop_cart_v1';
    function readCart(){ try{ return JSON.parse(localStorage.getItem(storeKey) || '[]') }catch(e){return []}}
    function writeCart(c){ localStorage.setItem(storeKey, JSON.stringify(c)) }

    let cart = readCart();

    function money(v){ return '₹' + Number(v).toLocaleString('en-IN') }

    /***********************
     * Render products
     ***********************/
    const productsEl = document.getElementById('products');
    function renderProducts(){
      productsEl.innerHTML = PRODUCTS.map(p=>`
        <div class="product card">
          <div class="thumb" style="background-image:url('${p.img}')"></div>
          <div class="meta">
            <h3>${p.title}</h3>
            <div class="muted" style="margin-bottom:8px">${p.desc}</div>
            <div class="price-row">
              <div class="price">${money(p.price)}</div>
              <div>
                <button class="btn buyBtn" data-id="${p.id}">Buy</button>
              </div>
            </div>
          </div>
        </div>
      `).join('');

      // attach events
      document.querySelectorAll('.buyBtn').forEach(b=>b.addEventListener('click', e=>{
        const id = e.currentTarget.dataset.id; addToCart(id, 1); openCheckoutModal();
      }))
    }

    /***********************
     * Cart UI
     ***********************/
    const cartCountEl = document.getElementById('cartCount');
    const cartListEl = document.getElementById('cartList');
    const subtotalEl = document.getElementById('subtotal');
    const feesEl = document.getElementById('fees');
    const grandTotalEl = document.getElementById('grandTotal');

    function updateCartUI(){
      cartCountEl.textContent = cart.reduce((s,i)=>s+i.qty,0);
      cartListEl.innerHTML = cart.length ? cart.map(item=>{
        const p = PRODUCTS.find(x=>x.id===item.id);
        return `
          <div class="cart-item">
            <img src="${p.img}" alt="${p.title}" />
            <div class="info">
              <div style="display:flex;justify-content:space-between;align-items:center"><strong>${p.title}</strong><div class="muted">${money(p.price)}</div></div>
              <div style="display:flex;gap:8px;margin-top:6px;align-items:center">
                <button class="btn secondary qtyBtn" data-id="${item.id}" data-op="-">-</button>
                <div class="pill">Qty: ${item.qty}</div>
                <button class="btn" style="padding:6px 8px" class="qtyBtn" data-id="${item.id}" data-op="+">+</button>
                <button class="btn secondary" data-id="${item.id}" data-op="remove">Remove</button>
              </div>
            </div>
          </div>
        `
      }).join('') : `<div class="muted center">Your cart is empty — click Buy on any product.</div>`;

      // attach cart item events
      document.querySelectorAll('[data-op]').forEach(btn=>btn.addEventListener('click', e=>{
        const id = e.currentTarget.dataset.id; const op = e.currentTarget.dataset.op;
        if(op === '+') changeQty(id, 1);
        else if(op === '-') changeQty(id, -1);
        else if(op === 'remove') removeFromCart(id);
      }))

      const subtotal = cart.reduce((s,i)=> s + (PRODUCTS.find(p=>p.id===i.id).price * i.qty), 0);
      const fees = Math.round(subtotal * 0.03); // 3% fees example
      const grand = subtotal + fees;
      subtotalEl.textContent = money(subtotal);
      feesEl.textContent = money(fees);
      grandTotalEl.textContent = money(grand);
    }

    function addToCart(id, qty=1){
      const idx = cart.findIndex(i=>i.id===id);
      if(idx === -1) cart.push({id, qty}); else cart[idx].qty += qty;
      writeCart(cart); updateCartUI();
    }
    function changeQty(id, delta){
      const idx = cart.findIndex(i=>i.id===id); if(idx === -1) return;
      cart[idx].qty += delta; if(cart[idx].qty <= 0) cart.splice(idx,1);
      writeCart(cart); updateCartUI();
    }
    function removeFromCart(id){ cart = cart.filter(i=>i.id!==id); writeCart(cart); updateCartUI(); }
    function clearCart(){ cart = []; writeCart(cart); updateCartUI(); }

    document.getElementById('clearBtn').addEventListener('click', ()=>{ clearCart(); });

    // open cart button
    document.getElementById('openCartBtn').addEventListener('click', ()=>{
      // scroll to sidebar
      document.querySelector('.sidebar').scrollIntoView({behavior:'smooth', block:'center'});
    })

    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      if(!cart.length) { alert('Cart is empty — add items first.'); return; }
      openCheckoutModal();
    })

    /***********************
     * Checkout modal
     ***********************/
    const modalRoot = document.getElementById('modalRoot');

    function closeModal(){ modalRoot.innerHTML = '' }

    function openCheckoutModal(){
      const subtotal = cart.reduce((s,i)=> s + (PRODUCTS.find(p=>p.id===i.id).price * i.qty), 0);
      const fees = Math.round(subtotal * 0.03);
      const grand = subtotal + fees;

      modalRoot.innerHTML = `
        <div class="modal-backdrop" id="modalBackdrop">
          <div class="modal card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
              <div>
                <h3>Checkout</h3>
                <div class="muted">Review your order and confirm payment (demo)</div>
              </div>
              <button id="closeModalBtn" class="btn secondary">X</button>
            </div>

            <div style="display:flex;gap:12px">
              <div style="flex:1">
                <div class="muted">Contact</div>
                <input id="nameInput" placeholder="Full name" />
                <div style="height:8px"></div>
                <input id="emailInput" placeholder="Email" />
                <div style="height:12px"></div>
                <div class="muted">Shipping address</div>
                <textarea id="addressInput" rows="3" placeholder="Street, City, PIN"></textarea></div>
          <div style="width:260px">
            <div class="muted">Order summary</div>
            <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px;max-height:300px;overflow:auto">
              ${cart.map(item=>{
                const p = PRODUCTS.find(x=>x.id===item.id);
                return `<div style="display:flex;justify-content:space-between"><div>${p.title} × ${item.qty}</div><div>${money(p.price*item.qty)}</div></div>`
              }).join('')}
            </div>

            <div style="border-top:1px dashed rgba(255,255,255,0.04);margin-top:10px;padding-top:10px">
              <div style="display:flex;justify-content:space-between"><div class="muted">Subtotal</div><div>${money(subtotal)}</div></div>
              <div style="display:flex;justify-content:space-between"><div class="muted">Fees</div><div>${money(fees)}</div></div>
              <div style="display:flex;justify-content:space-between;font-weight:800;margin-top:8px"><div>Total</div><div>${money(grand)}</div></div>
            </div>

            <div style="margin-top:12px;display:flex;gap:8px">
              <button id="confirmBtn" class="btn" style="flex:1">Confirm Purchase</button>
              <button id="payLaterBtn" class="btn secondary">Pay later</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  `;

  // attach modal events
  document.getElementById('closeModalBtn').addEventListener('click', closeModal);
  document.getElementById('modalBackdrop').addEventListener('click', (ev)=>{ if(ev.target.id === 'modalBackdrop') closeModal(); });

  document.getElementById('confirmBtn').addEventListener('click', ()=>{
    const name = document.getElementById('nameInput').value.trim();
    const email = document.getElementById('emailInput').value.trim();
    const address = document.getElementById('addressInput').value.trim();
    if(!name || !email) { alert('Please provide name and email to continue.'); return; }

    // simulate processing
    document.getElementById('confirmBtn').textContent = 'Processing...'; document.getElementById('confirmBtn').disabled = true;
    setTimeout(()=>{
      // generate receipt
      const receipt = generateReceipt({name,email,address,items:cart});
      const blob = new Blob([receipt], {type: 'text/plain'});
      const url = URL.createObjectURL(blob);

      modalRoot.innerHTML = `
        <div class="modal-backdrop">
          <div class="modal card center">
            <h3>Payment successful</h3>
            <p class="muted">Thanks, ${escapeHtml(name)}! Your order is confirmed.</p>
            <div style="margin-top:8px">Total: <strong>${money(grand)}</strong></div>
            <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
              <a id="downloadReceipt" href="${url}" download="receipt.txt" class="btn">Download receipt</a>
              <button id="doneBtn" class="btn secondary">Close</button>
            </div>
          </div>
        </div>
      `;

      // clear cart
      clearCart();

      document.getElementById('doneBtn').addEventListener('click', closeModal);
    }, 900);
  });

  document.getElementById('payLaterBtn').addEventListener('click', ()=>{ alert('Payment postponed — order saved locally.'); closeModal(); });
}

function generateReceipt({name,email,address,items}){
  const lines = [];
  lines.push('One‑Page Shop — Receipt');
  lines.push('Date: ' + new Date().toLocaleString());
  lines.push('Name: ' + name);
  lines.push('Email: ' + email);
  if(address) lines.push('Address: ' + address);
  lines.push('\nItems:');
  let subtotal = 0;
  for(const it of items){
    const p = PRODUCTS.find(x=>x.id===it.id);
    const line = `${p.title} × ${it.qty} @ ${p.price} = ${p.price*it.qty}`;
    lines.push(line);
    subtotal += p.price * it.qty;
  }
  const fees = Math.round(subtotal * 0.03);
  const grand = subtotal + fees;
  lines.push('\nSubtotal: ' + subtotal);
  lines.push('Fees (3%): ' + fees);
  lines.push('Total: ' + grand);
  lines.push('\nThank you for shopping locally!');
  return lines.join('\n');
}

function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) }

// initial render
renderProducts(); updateCartUI();

// small helper to satisfy older inlined CSS call (no-op)
function platformFillWidth(){ return '100%'; }

  </script>
</body>
</html>